<!DOCTYPE html>
<html lang="en">
    <div class="add-member-form">
    <h2>Add New Member</h2>
    <form id="memberForm">
        <div class="form-group">
            <label for="memberName">Full Name:</label>
            <input type="text" id="memberName" name="memberName" required>
        </div>
        
        <div class="form-group">
            <label for="memberType">Member Type:</label>
            <select id="memberType" name="memberType" required>
                <option value="">-- Select Type --</option>
                <option value="monthly">Monthly Gym Goer</option>
                <option value="combative">Combative Sports</option>
            </select>
        </div>
        
        <div class="form-group">
            <label for="joinDate">Join Date:</label>
            <input type="date" id="joinDate" name="joinDate" required>
        </div>
        
        <div class="form-group">
            <label for="phone">Phone Number:</label>
            <input type="tel" id="phone" name="phone">
        </div>
        
        <div class="form-group">
            <label for="email">Email:</label>
            <input type="email" id="email" name="email">
        </div>
        
        <button type="submit" class="add-member-button">Add Member</button>
    </form>
</div>
<script>
   async function addMember() {
  const memberData = {
    name: document.getElementById('name').value.trim(), // Required
    type: document.getElementById('type').value, // Must be 'monthly'/'combative'
    phone: document.getElementById('phone').value || undefined, // Optional
    email: document.getElementById('email').value || undefined // Optional
  };

  try {
    const response = await fetch(
      'https://flex-it-goalsgym-it-project-2.onrender.com/api/members',
      {
        method: 'POST',
        headers: { 'Content-Type': 'application/json' },
        body: JSON.stringify(memberData)
      }
    );

    if (!response.ok) {
      const errorData = await response.json();
      throw new Error(errorData.details?.join(', ') || 'Validation failed');
    }

    alert('Member added successfully!');
  } catch (error) {
    alert(`Error: ${error.message}`);
    console.error('Validation details:', error);
  }
}
</script>


</html>