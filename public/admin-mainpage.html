<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Admin Dashboard - GOALS Gym</title>
    <link rel="stylesheet" href="admin-mainpage.css">
</head>
<body>
    <header class="admin-header">
        <h1>GOALS Gym Admin Dashboard</h1>
        <button class="logout-btn" id="logoutBtn">Logout</button>
    </header>
    
    <main class="admin-content">
        <section id="adminPanel">
            <h2>Welcome, <span id="adminName"></span>!</h2>
            <p>You have successfully logged in to the admin panel.</p>
            
            <div class="admin-section">
                <h3>Quick Actions</h3>
                <div class="action-buttons">
                    <button class="action-btn" id="manageMembers">Manage Members</button>
                    <button class="action-btn" id="viewReports">View Reports</button>
                    <button class="action-btn" id="systemSettings">System Settings</button>
                </div>
            </div>
        </section>
    </main>

    <script>
        // GitLab Pages compatible authentication
        document.addEventListener('DOMContentLoaded', () => {
            console.group("[GOALS Gym] Auth Check");
            
            try {
                // 1. Get authentication data
                const authData = JSON.parse(localStorage.getItem('authUser'));
                console.log("Auth data loaded:", authData);
                
                // 2. Validate session
                if (!authData?.username) {
                    throw new Error("No active session found");
                }
                
                // 3. Display user info
                document.getElementById('adminName').textContent = authData.name || authData.username;
                console.log("User authenticated:", authData.username);
                
                // 4. Set up logout button
                document.getElementById('logoutBtn').addEventListener('click', () => {
                    localStorage.removeItem('authUser');
                    window.location.href = '/flex-it-goalsgym-it-project-2-ecd552/login.html';
                });
                
                // 5. Set up action buttons (stub functions)
                ['manageMembers', 'viewReports', 'systemSettings'].forEach(id => {
                    document.getElementById(id).addEventListener('click', () => {
                        console.log(`Action: ${id}`);
                        // Add actual functionality here
                    });
                });
                
            } catch (error) {
                console.error("Authentication error:", error);
                // Redirect to login page with full GitLab Pages path
                window.location.href = '/flex-it-goalsgym-it-project-2-ecd552/login.html';
            } finally {
                console.groupEnd();
            }
        });
    </script>
</body>
</html>