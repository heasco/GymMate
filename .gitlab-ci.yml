image: alpine:latest

stages:
  - deploy

pages:
  stage: deploy
  before_script:
    - mkdir -p public
    - echo "Current directory contents:"
    - ls -la
  script:
    # Copy files with error suppression
    - cp *.html public/ 2>/dev/null || echo "No HTML files found"
    - cp *.css public/ 2>/dev/null || echo "No CSS files found"
    - cp *.js public/ 2>/dev/null || echo "No JS files found"
    
    # Create default index.html if none exists
    - |
      if [ ! -f public/index.html ]; then
        echo "Creating default index.html"
        echo "<h1>Welcome to GoalsGym</h1><p><a href='login.html'>Login</a></p>" > public/index.html
      fi
  artifacts:
    paths:
      - public
  rules:
    - if: $CI_COMMIT_BRANCH == $CI_DEFAULT_BRANCH