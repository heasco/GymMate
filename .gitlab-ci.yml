image: alpine:latest

stages:
  - deploy

pages:
  stage: deploy
  before_script:
    - echo "Cleaning public directory..."
    - rm -rf public
    - mkdir -p public
  script:
    # Copy ALL frontend files (HTML, CSS, JS, images)
    - echo "Copying files to public directory..."
    - cp -r *.html *.css *.js images/ public/ 2>/dev/null || echo "Some files not found (this may be normal)"

    # Verify copied files (critical debugging)
    - echo "Final public directory contents:"
    - ls -la public/
  artifacts:
    paths:
      - public
    expire_in: 1 hour # Optional: Reduces storage usage
  rules:
    - if: $CI_COMMIT_BRANCH == $CI_DEFAULT_BRANCH
  only:
    - main  # Replace with your default branch if different