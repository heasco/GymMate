image: alpine:latest

stages:
  - deploy

pages:
  stage: deploy
  before_script:
    - echo "Preparing deployment..."
    - mkdir -p public
    - echo "Current directory structure:"
    - ls -la
  script:
    # Copy HTML files
    - echo "Copying HTML files..."
    - find . -maxdepth 1 -name '*.html' -exec cp -v {} public/ \;
    
    # Copy CSS files
    - echo "Copying CSS files..."
    - find . -maxdepth 1 -name '*.css' -exec cp -v {} public/ \;
    
    # Copy JS files
    - echo "Copying JavaScript files..."
    - find . -maxdepth 1 -name '*.js' -exec cp -v {} public/ \;
    
    # Copy images directory if it exists
    - echo "Copying images..."
    - if [ -d images ]; then
        cp -rv images public/;
      else
        echo "No images directory found";
      fi

    # Verify copied files
    - echo "Final public directory contents:"
    - ls -la public/
  artifacts:
    paths:
      - public
    expire_in: 1 week
  only:
    - master  # Change to your default branch name if different