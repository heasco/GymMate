<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Trainer Dashboard - GOALS Gym</title>
    <link rel="stylesheet" href="../admin/admin-css/admin-mainpage.css">
    <link rel="stylesheet" href="./trainer-css/trainer-mainpage.css">
</head>
<body>
    <div class="admin-container">
        <aside class="sidebar">
            <div class="sidebar-header">
                <h2>GOALS Gym Trainer</h2>
            </div>
            <nav class="sidebar-nav">
                <a href="trainer-mainpage.html" class="active"><span>Dashboard</span></a>
                <a href="view-and-change-schedule.html"><span>My Classes & Schedule</span></a>
                <a href="trainer-profile-management.html"><span>Profile</span></a>
                <a href="view-classes-feedback.html"><span>Feedback</span></a>
                <a href="trainer-availability.html"><span>Availability</span></a>
            </nav>
        </aside>
        
        <header class="header">
            <button class="menu-toggle" id="menuToggle">â˜°</button>
            <h1>Trainer Dashboard</h1>
            <button class="logout-btn" id="logoutBtn">Logout</button>
        </header>
        
        <main class="main-content">
            <div class="trainer-greeting">
                <h2>Welcome, <span id="trainerName">Christian Bryan Tom</span>!</h2>
                <div class="specialization" id="specialization">Specialization: Fitness Training</div>
            </div>
            
            <div class="dashboard-metrics" id="dashboardMetrics">
                <div class="dashboard-cards-row">
                    <div class="dashboard-stat-card">
                        <div class="stat-title">Weekly Attendance Total</div>
                        <div class="stat-value">42</div>
                    </div>
                    <div class="dashboard-stat-card">
                        <div class="stat-title">Most Attended Session</div>
                        <div class="stat-value">Morning Yoga</div>
                    </div>
                </div>
            </div>
            
            <div class="section">
                <h3>Your Classes and Attendance</h3>
                <div id="scheduleLoading" class="loading">Loading schedule...</div>
                <div id="trainerSchedule">
                    <table class="dashboard-table">
                        <thead>
                            <tr>
                                <th>Class Name</th>
                                <th>Schedule</th>
                                <th>Capacity</th>
                                <th>Enrolled</th>
                                <th>Attendance This Week</th>
                                <th>Participation Rate (%)</th>
                                <th>Attendance Streak</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td>Morning Yoga</td>
                                <td>Mon, Wed, Fri 7:00 AM</td>
                                <td>20</td>
                                <td>18</td>
                                <td>15</td>
                                <td>83%</td>
                                <td>5</td>
                            </tr>
                            <tr>
                                <td>HIIT Training</td>
                                <td>Tue, Thu 5:00 PM</td>
                                <td>15</td>
                                <td>12</td>
                                <td>10</td>
                                <td>83%</td>
                                <td>4</td>
                            </tr>
                            <tr>
                                <td>Strength Training</td>
                                <td>Mon, Wed 6:00 PM</td>
                                <td>20</td>
                                <td>8</td>
                                <td>6</td>
                                <td>75%</td>
                                <td>3</td>
                            </tr>
                            <tr>
                                <td>Cardio Blast</td>
                                <td>Tue, Thu 7:00 AM</td>
                                <td>10</td>
                                <td>9</td>
                                <td>8</td>
                                <td>89%</td>
                                <td>6</td>
                            </tr>
                            <tr>
                                <td>Flexibility & Stretch</td>
                                <td>Sat 9:00 AM</td>
                                <td>10</td>
                                <td>6</td>
                                <td>3</td>
                                <td>50%</td>
                                <td>2</td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>
        </main>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            const menuToggle = document.getElementById('menuToggle');
            const sidebar = document.querySelector('.sidebar');
            const logoutBtn = document.getElementById('logoutBtn');
            const authUser = JSON.parse(localStorage.getItem('authUser'));
            
            if (!authUser || !authUser.user || authUser.role !== "trainer" || (Date.now() - authUser.timestamp > 3600000)) {
                localStorage.removeItem('authUser');
                window.location.href = '../trainer-login.html';
                return;
            }
            
            menuToggle.addEventListener('click', () => sidebar.classList.toggle('collapsed'));
            
            logoutBtn.addEventListener('click', () => {
                localStorage.removeItem('authUser');
                window.location.href = '../trainer-login.html';
            });
            
            document.getElementById('trainerName').textContent = authUser.user.name;
            if (authUser.user.specialization) {
                document.getElementById('specialization').textContent = `Specialization: ${authUser.user.specialization}`;
            }
            
            document.addEventListener('click', (e) => {
                if (window.innerWidth <= 768 && !sidebar.contains(e.target) && !menuToggle.contains(e.target)) {
                    sidebar.classList.remove('collapsed');
                }
            });
            
            document.getElementById('scheduleLoading').style.display = 'none';
        });
    </script>
</body>
</html>