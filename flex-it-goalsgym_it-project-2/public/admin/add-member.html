<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Add Member - GOALS Gym</title>
    <link rel="icon" type="image/png" href="image/logo2.png">
    <link rel="stylesheet" href="./admin-css/admin-mainpage.css">
    <link rel="stylesheet" href="./admin-css/add-member.css">
    <script src="https://kit.fontawesome.com/1d0b8c9b1d.js" crossorigin="anonymous"></script>
</head>

<body>
    <div class="admin-container">
        <!-- Sidebar -->
        <aside class="sidebar">
            <div class="sidebar-header">
                <h2>GOALS Gym Admin</h2>
                <p id="adminFullName" class="admin-fullname">Loading...</p>
            </div>
            <nav class="sidebar-nav">
                <a href="./admin-mainpage.html"><span>Dashboard</span></a>
                <a href="./add-classes.html"><span>Add Classes</span></a>
                <a href="./add-member.html" class="active"><span>Add Member</span></a>
                <a href="./manage-members.html"><span>Manage Member</span></a>
                <a href="./add-trainer.html"><span>Add Trainer</span></a>
                <a href="./manage-trainer.html"><span>Manage Trainer</span></a>
                <a href="./manage-class-enrollment.html"><span>Manage Enrollment</span></a>
                <a href="./add-and-view-transaction.html"><span>Add & View Transaction</span></a>
                <a href="./view-classes-and-feedback.html"><span>View Classes</span></a>
                <a href="./trainer-schedule-management.html"><span>Trainer Schedule Management</span></a>
                        <a href="./attendance-checker.html"><span>Attendance System</span></a>
                        <a href="./send-announcement-email.html"><span>Send Announcement</span></a>
                        <a href="./view-logs.html"><span>View Logs</span></a>
                      </nav>        </aside>

        <!-- Header -->
        <header class="header">
            <button class="menu-toggle" id="menuToggle">☰</button>
            <h1>Add Member</h1>
            <button class="logout-btn" id="logoutBtn">Logout</button>
        </header>

        <!-- Main Content -->
        <main class="main-content">
            <h2>Add New Member</h2>

            <!-- Add Member Form -->
            <form id="memberForm" class="member-form">
                <div class="form-group">
                    <label for="memberName">Full Name *</label>
                    <input type="text" id="memberName" name="memberName" required>
                </div>

                <!-- ✅ BIRTHDATE with Calendar Icon -->
                <div class="field">
                    <label class="label" for="birthdate">Birthdate *</label>
                    <div class="control date-wrapper">
                        <input class="input" type="text" id="birthdateDisplay" readonly placeholder="Select birthdate"
                            required>
                        <input type="date" id="birthdate" name="birthdate" class="hidden-date" required>
                        <i class="fas fa-calendar-alt date-icon" id="birthdateIcon"></i>
                    </div>
                    <p class="help">Member must be at least 13 years old</p>
                </div>

                <div class="form-group">
                    <label>Membership Type(s) *</label>
                    <div class="checkbox-group">
                        <label class="checkbox">
                            <input type="checkbox" id="monthlyCheckbox" name="membershipTypes" value="monthly">
                            Monthly Gym Membership
                        </label>
                        <label class="checkbox">
                            <input type="checkbox" id="combativeCheckbox" name="membershipTypes" value="combative">
                            Combative Sports Membership
                        </label>
                    </div>
                </div>

                <div class="form-group membership-details" id="monthlyDetails">
                    <label for="monthlyDuration">Duration (months):</label>
                    <input type="number" id="monthlyDuration" name="monthlyDuration" min="1" value="1">
                </div>

                <div class="form-group membership-details" id="combativeDetails">
                    <label for="combativeSessions">Number of Sessions:</label>
                    <input type="number" id="combativeSessions" name="combativeSessions" min="1" value="12">
                </div>

                <!-- ✅ JOIN DATE with Calendar Icon -->
                <div class="form-group">
                    <label for="joinDate">Join Date *</label>
                    <div class="date-wrapper">
                        <input type="text" id="joinDateDisplay" readonly placeholder="Select join date" required>
                        <input type="date" id="joinDate" name="joinDate" class="hidden-date" required>
                        <i class="fas fa-calendar-alt date-icon" id="joinDateIcon"></i>
                    </div>
                </div>

                <div class="form-group">
                    <label for="phone">Phone Number (Optional)</label>
                    <input type="tel" id="phone" name="phone">
                </div>

                <div class="form-group">
                    <label for="email">Email</label>
                    <input type="email" id="email" name="email">
                </div>

                <div class="form-group">
                    <label>Facial Recognition Enrollment</label>
                    <div class="fp-controls">
                        <input type="hidden" id="faceEnrolled" name="faceEnrolled">
                        <button type="button" class="face-capture-btn" id="openFacePaneBtn">
                            <i class="fas fa-user-check"></i>
                            Capture Face
                        </button>
                        <span id="faceStatus" class="fp-status-message"></span>
                    </div>
                </div>

                <button type="submit" class="submit-btn">Add Member</button>
            </form>

            <!-- Renew Membership Button (OUTSIDE FORM) -->
            <div class="or-divider">
                <span>OR</span>
            </div>
            <button type="button" class="renew-btn" id="renewBtn">
                <i class="fas fa-sync-alt"></i> Renew Membership
            </button>

            <div id="message" class="message hidden"></div>
        </main>
    </div>

    <!-- Face Capture Modal -->
    <div id="facePane" class="face-pane">
        <div class="face-modal">
            <h3>Facial Enrollment</h3>
            <div class="face-capture-area">
                <video id="camera" autoplay></video>
                <canvas id="snapshot"></canvas>
                <div class="face-center-box"></div>
            </div>
            <div class="face-controls">
                <button type="button" class="btn-primary" id="captureFaceBtn">Capture Photo</button>
                <button type="button" class="btn-success" id="confirmFaceBtn" disabled>Confirm & Save</button>
                <button type="button" class="btn-secondary" id="closeFacePaneBtn">Close</button>
            </div>
            <div id="faceResultMsg" class="face-result-msg"></div>
        </div>
    </div>

    <!-- Renewal Modal -->
    <div id="renewalModal" class="renewal-modal">
        <div class="renewal-content">
            <div class="renewal-header">
                <h3><i class="fas fa-sync-alt"></i> Renew Member Membership</h3>
                <button type="button" class="close-modal" id="closeRenewalBtn">&times;</button>
            </div>

            <div class="renewal-body">
                <!-- Search Section -->
                <div class="search-section">
                    <label for="searchMember">Search Member *</label>
                    <div class="search-input-group">
                        <input type="text" id="searchMember" placeholder="Enter Member ID or Name">
                        <button type="button" class="search-btn" id="searchBtn">
                            <i class="fas fa-search"></i> Search
                        </button>
                    </div>
                    <div id="searchResults" class="search-results"></div>
                </div>

                <!-- Selected Member Info -->
                <div id="selectedMemberSection" class="selected-member-section" style="display: none;">
                    <div class="member-info-card" id="memberInfoCard"></div>

                    <!-- Renewal Form -->
                    <form id="renewalForm">
                        <!-- Calendar Date Picker -->
                        <div class="form-group date-picker-group">
                            <label for="renewalDate">
                                <i class="fas fa-calendar-alt"></i> Select Renewal Date *
                            </label>
                            <div class="date-input-wrapper">
                                <input type="date" id="renewalDate" required>
                                <i class="fas fa-calendar icon-calendar"></i>
                            </div>
                            <p class="help">Choose the date when the renewal should start</p>
                        </div>

                        <div class="form-group">
                            <label>Select Membership to Renew *</label>
                            <div class="checkbox-group">
                                <label class="checkbox renewal-checkbox">
                                    <input type="checkbox" id="renewMonthly" value="monthly">
                                    Monthly Gym Membership
                                </label>
                                <label class="checkbox renewal-checkbox">
                                    <input type="checkbox" id="renewCombative" value="combative">
                                    Combative Sports Membership
                                </label>
                            </div>
                        </div>

                        <div class="form-group membership-details" id="renewMonthlyDetails" style="display: none;">
                            <label for="renewMonthlyDuration">Duration (months):</label>
                            <input type="number" id="renewMonthlyDuration" min="1" value="1">
                        </div>

                        <div class="form-group membership-details" id="renewCombativeDetails" style="display: none;">
                            <label for="renewCombativeSessions">Number of Sessions:</label>
                            <input type="number" id="renewCombativeSessions" min="1" value="12">
                        </div>

                        <div id="renewalInfoBox" class="renewal-info-box" style="display: none;"></div>

                        <button type="submit" class="submit-btn">
                            <i class="fas fa-check"></i> Confirm Renewal
                        </button>
                    </form>
                </div>
            </div>
        </div>
    </div>
<script src="admin-js/add-member.js"></script>
    
</body>

</html>